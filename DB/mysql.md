# MySQL

## 什么是最左前缀原则？什么是最左匹配原则
- 顾名思义，就是最左优先，在创建多列索引时，要根据业务需求，where子句中使用最频繁的一列放在最左边。
- 最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，比如a = 1 and b = 2 and c > 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。
- =和in可以乱序，比如a = 1 and b = 2 and c = 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式

## B树和B+树的区别
- 在B树中，你可以将键和值存放在内部节点和叶子节点；但在B+树中，内部节点都是键，没有值，叶子节点同时存放键和值。
- B+树的叶子节点有一条链相连，而B树的叶子节点各自独立。

## 数据库为什么使用B+树而不是B树
> 判断一种数据结构作为索引的优劣主要是看在查询过程中的磁盘IO渐进复杂度，一个好的索引应该是尽量减少磁盘IO操作次数

1. B树只适合**随机检索**，而B+树同时支持**随机检索和顺序检索**
2. **B+树空间利用率更高**。因为内部节点不存储数据，只存储索引值，因为相比较B树来说，B+树一个节点可以存储更多的索引值，从而使整颗B+树变得更矮，减少了I/O次数，磁盘读写代价更低，I/O读写次数是影响索引检索效率的最大因素
3. **B+树的查询效率更加稳定**。B树搜索有可能会在非叶子节点阶数，约靠近根节点的记录查找时间越短，**其性能等价于在关键字全集内做一次二分查找**。而在B+树中，**顺序检索比较明显，随机检索时，任何关键字的查找都必须走一条从根节点到叶节点的路，所有关键字的查找路径相同，导致每一个关键字的查询效率相当**
4. **B树在在基于范围查询的操作上的性能没有B+树好**，因为B+树的叶子节点使用了指针顺序的链接在一起，只要遍历叶子节点就可以实现整棵树的遍历，相比较B+树来说，由于B树的叶子节点是相互独立的，所以对于范围查询，需要从根节点再次出发查询，**增加了磁盘I/O操作次数**
5. **增删文件（节点）时，效率更高**，因为B+树的叶子节点包含了所有关键字，并以有序的链表结构存储，这样可很好提高增删效率 

